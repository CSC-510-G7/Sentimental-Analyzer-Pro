<!DOCTYPE html>
<html>
   {% load static %}
   <head lang="en">
      <meta charset="UTF-8">
      <title>S.A.P</title>
      <meta name="keywords" content="">
      <meta name="description" content="">
      <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
      <link rel="shortcut icon" href="{% static "images/favicon-black.ico" %}" title="Favicon"/>
      <link rel="stylesheet" href="{% static "css/bg.css" %}">
      <link rel="stylesheet" href="{% static "css/style.css" %}">
      <link rel="stylesheet" href="{% static "css/dynamic.css" %}">
      <link rel="stylesheet" href="{% static "css/nemina.css" %}">
      <link rel="stylesheet" href="{% static "css/header.css" %}">
      <link rel="stylesheet" href="{% static "css/font-awesome.min.css" %}">
      <link href="{% static "css/animate.css" %}" rel="stylesheet" type="text/css">
      <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800' rel='stylesheet' type='text/css'>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-/RSva8ME+iHQsLO+St7Xg/SJ9ufViOc6pkKAAMfvhN/EFZSC0HVivYOY1DOtTiLEooL6G6Ae2H+pfN43f8r5Gg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

   </head>
   <body>
      <style>
         .form-label {
         display: block;
         font-weight: bold;
         margin-bottom: 10px;
         text-align: left;
         }
         .hidden {
         display: none;
         }
         .drop-container {
         position: relative;
         display: flex;
         gap: 10px;
         flex-direction: column;
         justify-content: center;
         align-items: center;
         height: 160px;
         padding: 20px;
         border-radius: 10px;
         border: 2px dashed #555;
         color: #444;
         cursor: pointer;
         transition: background .2s ease-in-out, border .2s ease-in-out;
         }
         .drop-container:hover {
         background: #eee;
         border-color: #111;
         }
         .drop-container:hover .drop-title {
         color: #222;
         }
         .drop-title {
         color: #444;
         font-size: 20px;
         font-weight: bold;
         text-align: center;
         transition: color .2s ease-in-out;
         }
         .mt-4 {
            margin-top: 2rem;
         }
         .line-edit {
            width: 100%;
            padding: 8px;
            margin-bottom: 1rem;
            border: 1px solid #ddd;
            border-radius: 4px;
         }
         textarea.line-edit {
            resize: vertical;
            min-height: 100px;
         }
         .button {
            margin-top: 10px;
         }
      </style>
      <div id="preloader">
         <div id="status" class="la-ball-triangle-path">
            <div></div>
            <div></div>
            <div></div>
         </div>
      </div>
      <div class="page-border" data-wow-duration="0.7s" data-wow-delay="0.2s">
         <div class="top-border wow fadeInDown animated" style="visibility: visible; animation-name: fadeInDown;"></div>
         <div class="right-border wow fadeInRight animated" style="visibility: visible; animation-name: fadeInRight;"></div>
         <div class="bottom-border wow fadeInUp animated" style="visibility: visible; animation-name: fadeInUp;"></div>
         <div class="left-border wow fadeInLeft animated" style="visibility: visible; animation-name: fadeInLeft;"></div>
      </div>
      <div id="wrapper">
         <header id="banner" class="scrollto clearfix" data-enllax-ratio=".5">
            {% include 'realworld/header.html' %}
         </header>
         <main id="content" class="bgcol">
            <section id="about" class="introduction scrollto">
               <div class="row clearfix" >
                  <div class="col-1-2">
                     <h2 class="section-title">History</h2>
                    </div>
                  </div>
                </div>
            </body>
            <!-- <div class="sep">   </div> -->
            <section id="gallery" class="scrollto clearfix">
               <div class="row no-padding-bottom clearfix">
                  <div class="col-1">
                     <div class="section-heading">
                        <h2 class="section-title">Product Analysis</h2>
                        <ol class="history-list">
                            {% for timestamp, data in history_data.Product_Analysis.items %}
                                <li class="history-item">
                                    <!-- <a href="#">{{ timestamp }}: {{ data }}</a> -->
                                    <a href="{% url 'product_history_detail' timestamp=timestamp %}">
                                        {{ timestamp }}: {{ data }}
                                    </a>
                                </li>
                            {% endfor %}
                        </ol>
                     </div>
                  </div>
               </div>
            </section>
            <section id="services" class="scrollto clearfix">
               <div class="row no-padding-bottom clearfix">
                  <div class="col-1" style="padding-left: 0px;">
                     <div class="section-heading">
                        <h2 class="section-title">Image Analysis</h2>
                        <ol class="history-list">
                            {% for timestamp, data in history_data.Image_Analysis.items %}
                                <li class="history-item">
                                    <!-- <a href="#">{{ timestamp }}: {{ data }}</a> -->
                                    <a href="{% url 'image_history_detail' timestamp=timestamp %}">
                                        {{ timestamp }}: {{ data }}
                                    </a>
                                </li>
                            {% endfor %}
                        </ol>
                     </div>
                  </div>
               </div>
            </section>
            <section id="news" class="scrollto clearfix">
               <div class="row no-padding-bottom clearfix">
                  <div class="col-1">
                     <div class="section-heading">
                        <h2 class="section-title">News Analysis</h2>
                        <ol class="history-list">
                            {% for timestamp, data in history_data.News_Analysis.items %}
                                <li class="history-item">
                                    <!-- <a href="#">{{ timestamp }}: {{ data }}</a> -->
                                    <a href="{% url 'news_history_detail' timestamp=timestamp %}">
                                        {{ timestamp }}: {{ data }}
                                    </a>
                                </li>
                            {% endfor %}
                        </ol>
                     </div>
                  </div>
               </div>
            </section>
            <section id="document" class="scrollto clearfix">
               <div class="row no-padding-bottom clearfix">
                  <div class="col-1" style="padding-left: 0px;">
                     <div class="section-heading">
                        <h2 class="section-title">Document Analysis</h2>
                        <ol class="history-list">
                            {% for timestamp, data in history_data.Doc_Analysis.items %}
                                <li class="history-item">
                                    <!-- <a href="#">{{ timestamp }}: {{ data }}</a> -->
                                    <a href="{% url 'document_history_detail' timestamp=timestamp %}">
                                        {{ timestamp }}: {{ data }}
                                    </a>
                                </li>
                            {% endfor %}
                        </ol>
                     </div>
                  </div>
               </div>
            </section>
            <section id="text" class="scrollto clearfix">
               <div class="row no-padding-bottom clearfix">
                   <div class="col-1" style="padding-left: 0px;">
                       <div class="section-heading">
                           <h2 class="section-title">Text Analysis</h2>
                           <ol class="history-list">
                            {% for timestamp, data in history_data.Text_Analysis.items %}
                                <li class="history-item">
                                    <a href="{% url 'text_history_detail' timestamp=timestamp %}">
                                        {{ timestamp }}: {{ data }}
                                    </a>
                                </li>
                            {% endfor %}
                        </ol>
                       </div>
                   </div>
               </div>
           </section>
            <section id="audio" class="scrollto clearfix">
               <div class="row no-padding-bottom clearfix">
                  <div class="col-1" style="padding-left: 0px;">
                     <div class="section-heading">
                        <h2 class="section-title">Audio Analysis</h2>
                        <ol class="history-list">
                            {% for timestamp, data in history_data.Audio_Analysis.items %}
                                <li class="history-item">
                                    <!-- <a href="#">{{ timestamp }}: {{ data }}</a> -->
                                    <a href="{% url 'audio_history_detail' timestamp=timestamp %}">
                                        {{ timestamp }}: {{ data }}
                                    </a>
                                </li>
                            {% endfor %}
                        </ol>
                     </div>
                  </div>
               </div>
            </section>
            <section id="live-speech" class="scrollto clearfix">
               <div class="row no-padding-bottom clearfix">
                  <div class="col-1" style="padding-left: 0px;">
                     <div class="section-heading">
                        <h2 class="section-title">Live Speech Analysis</h2>
                        <ol class="history-list">
                            {% for timestamp, data in history_data.Live_Speech.items %}
                                <li class="history-item">
                                    <!-- <a href="#">{{ timestamp }}: {{ data }}</a> -->
                                    <a href="{% url 'live_history_detail' timestamp=timestamp %}">
                                        {{ timestamp }}: {{ data }}
                                    </a>
                                </li>
                            {% endfor %}
                        </ol>
                     </div>
                  </div>
               </div>
               
            </section>
            <section id="facebook" class="scrollto clearfix">
               <div class="row no-padding-bottom clearfix">
                  <div class="col-1">
                     <div class="section-heading">
                        <h2 class="section-title">Facebook Analysis</h2>
                        <ol class="history-list">
                            {% for timestamp, data in history_data.Facebook.items %}
                                <li class="history-item">
                                    <!-- <a href="#">{{ timestamp }}: {{ data }}</a> -->
                                    <a href="{% url 'facebook_history_detail' timestamp=timestamp %}">
                                        {{ timestamp }}: {{ data }}
                                    </a>
                                </li>
                            {% endfor %}
                        </ol>
                     </div>
                  </div>
               </div>
            </section>
            <section id="twitter" class="scrollto clearfix">
               <div class="row no-padding-bottom clearfix">
                  <div class="col-1">
                     <div class="section-heading">
                        <h2 class="section-title">Twitter Analysis</h2>
                        <ol class="history-list">
                            {% for timestamp, data in history_data.Twitter.items %}
                                <li class="history-item">
                                    <!-- <a href="#">{{ timestamp }}: {{ data }}</a> -->
                                    <a href="{% url 'twitter_history_detail' timestamp=timestamp %}">
                                        {{ timestamp }}: {{ data }}
                                    </a>
                                </li>
                            {% endfor %}
                        </ol>
                     </div>
                  </div>
               </div>
            </section>
            <section id="reddit" class="scrollto clearfix">
               <div class="row no-padding-bottom clearfix">
                  <div class="col-1">
                     <div class="section-heading">
                        <h2 class="section-title">Reddit Analysis</h2>
                        <ol class="history-list">
                            {% for timestamp, data in history_data.Reddit.items %}
                                <li class="history-item">
                                    <!-- <a href="#">{{ timestamp }}: {{ data }}</a> -->
                                    <a href="{% url 'reddit_history_detail' timestamp=timestamp %}">
                                        {{ timestamp }}: {{ data }}
                                    </a>
                                </li>
                            {% endfor %}
                        </ol>
                     </div>
                  </div>
               </div>
            </section>
            
         </html>
         {% include 'realworld/footer.html' %}
          
        
      </div>
      <script src="{% static "js/jquery.1.8.3.min.js" %}"></script>
      <script src="{% static "js/wow.min.js" %}"></script>
      <script src="{% static "js/featherlight.min.js" %}"></script>
      <script src="{% static "js/featherlight.gallery.min.js" %}"></script>
      <script src="{% static "js/jquery.enllax.min.js" %}"></script>
      <script src="{% static "js/jquery.scrollUp.min.js" %}"></script>
      <script src="{% static "js/jquery.easing.min.js" %}"></script>
      <script src="{% static "js/jquery.stickyNavbar.min.js" %}"></script>
      <script src="{% static "js/jquery.waypoints.min.js" %}"></script>
      <script src="{% static "js/images-loaded.min.js" %}"></script>
      <script src="{% static "js/lightbox.min.js" %}"></script>
      <script src="{% static "js/site.js" %}"></script>
      <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>


      <script>
         const dropContainer = document.getElementById("dropcontainer")
         const fileInput = document.getElementById("file")
         
         dropContainer.addEventListener("dragover", (e) => {
             // prevent default to allow drop
             e.preventDefault()
         }, false)
         
         dropContainer.addEventListener("dragenter", () => {
             dropContainer.classList.add("drag-active")
         })
         
         dropContainer.addEventListener("dragleave", () => {
             dropContainer.classList.remove("drag-active")
         })
         
         dropContainer.addEventListener("drop", (e) => {
             e.preventDefault()
             dropContainer.classList.remove("drag-active")
             fileInput.files = e.dataTransfer.files
         })
         
         let mediaRecorder;
         const audioChunks = [];
         var label = document.getElementById('labelForRecording')
         document.getElementById('recordButton').addEventListener('click', async () => {
             if (recordButton.textContent === 'Start Recording') {
                 try {
                     const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                     mediaRecorder = new MediaRecorder(stream);
         
                     mediaRecorder.ondataavailable = (event) => {
                         if (event.data.size > 0) {
                             audioChunks.push(event.data);
                         }
                     };
         
                     mediaRecorder.onstop = () => {
                         const audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
                         sendDataToDjango(audioBlob);
                     };
         
                     mediaRecorder.start();
                     label.textContent = "Recording has started."
                     recordButton.textContent = 'Stop Recording';
                 } catch (error) {
                     console.error('Error accessing microphone:', error);
                 }
             } else {
                 audioChunks.length = 0;
                 label.textContent = "Recording is completed. Kindly, press analyze to do sentimental analysis"
                 mediaRecorder.stop();
                 recordButton.textContent = 'Start Recording';
             }
         });
         let count = 1;
         function sendDataToDjango(audioBlob) {
             const formData = new FormData();
             const filename = `${count}.wav`;
             formData.append('liveaudioFile', audioBlob, filename);
         
             fetch('/recordAudio/', {
                 method: 'POST',
                 body: formData,
             })
             .then(response => {
                 if (response.status === 200) {
                     console.log('Audio sent to Django successfully.');
                 } else {
                     console.error('Failed to send audio to Django.');
                     // Handle error
                 }
             })
             .catch(error => {
                 console.error('Error sending audio to Django:', error);
             });
         
             count++;
         }
         document.querySelectorAll('form').forEach(form => {
            form.addEventListener('submit', function() {
               const submitButton = this.querySelector('button[type="submit"]');
               submitButton.disabled = true;
               submitButton.textContent = 'Processing...';
            });
         });
      </script>
   </body>
</html>